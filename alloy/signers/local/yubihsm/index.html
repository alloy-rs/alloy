<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="yubihsm.rs"><title>alloy::signers::local::yubihsm - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="alloy" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (d7f6ebace 2024-06-16)" data-channel="nightly" data-search-js="search-0fe7219eb170c82e.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../../../../crates.js"></script><script defer src="../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/alloy-rs/core/main/assets/favicon.ico"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../../alloy/index.html"><img src="https://raw.githubusercontent.com/alloy-rs/core/main/assets/alloy.jpg" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../alloy/index.html"><img src="https://raw.githubusercontent.com/alloy-rs/core/main/assets/alloy.jpg" alt="logo"></a><h2><a href="../../../../alloy/index.html">alloy</a><span class="version">0.1.1</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Aliases</a></li></ul></section><h2><a href="../index.html">In alloy::signers::local</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a href="../../../index.html">alloy</a>::<wbr><a href="../../index.html">signers</a>::<wbr><a href="../index.html">local</a>::<wbr><a class="mod" href="#">yubihsm</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><span class="item-info"><div class="stab portability">Available on <strong>crate features <code>signers</code> and <code>signer-local</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><img src="https://raw.githubusercontent.com/iqlusioninc/yubihsm.rs/main/img/logo.png" width="150" height="110">
<h2 id="yubihsmrs"><a class="doc-anchor" href="#yubihsmrs">§</a>yubihsm.rs</h2>
<p><a href="https://crates.io/crates/yubihsm"><img src="https://buildstats.info/crate/yubihsm" alt="crate" /></a> <a href="https://docs.rs/yubihsm/"><img src="https://docs.rs/yubihsm/badge.svg" alt="Docs" /></a> <a href="https://github.com/iqlusioninc/yubihsm.rs/actions/workflows/ci.yml"><img src="https://github.com/iqlusioninc/yubihsm.rs/actions/workflows/ci.yml/badge.svg" alt="Build Status" /></a> <a href="https://deps.rs/repo/github/iqlusioninc/yubihsm.rs"><img src="https://deps.rs/repo/github/iqlusioninc/yubihsm.rs/status.svg" alt="Dependency Status" /></a> <img src="https://img.shields.io/badge/license-Apache2.0/MIT-blue.svg" alt="Apache2/MIT licensed" /> <img src="https://img.shields.io/badge/rustc-1.67+-blue.svg" alt="MSRV" /></p>
<p>Pure Rust client for <a href="https://www.yubico.com/products/yubihsm/">YubiHSM 2</a> devices from <a href="https://www.yubico.com/">Yubico</a>.</p>
<p><a href="https://docs.rs/yubihsm/">Documentation</a></p>
<h3 id="about"><a class="doc-anchor" href="#about">§</a>About</h3>
<p>This is a pure-Rust client library for <a href="https://www.yubico.com/products/yubihsm/">YubiHSM 2</a> devices which implements
most the functionality of the <a href="https://github.com/Yubico/yubihsm-shell/blob/master/lib/README.adoc">libyubihsm</a> C library from Yubico’s YubiHSM SDK.
It provides two backends for communicating with YubiHSMs:</p>
<ul>
<li><a href="https://docs.rs/yubihsm/latest/yubihsm/connector/struct.Connector.html#method.http">HTTP</a>: communicate with YubiHSM via the <code>yubihsm-connector</code>
process from the Yubico SDK.</li>
<li><a href="https://docs.rs/yubihsm/latest/yubihsm/connector/struct.Connector.html#method.usb">USB</a>: communicate directly with the YubiHSM over USB using
the <a href="https://github.com/a1ien/rusb">rusb</a> crate.</li>
</ul>
<p>The <a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html">yubihsm::Client</a> type provides access to <a href="https://developers.yubico.com/YubiHSM2/Commands/">HSM commands</a>.</p>
<p>This is <strong>NOT</strong> an official Yubico project and is in no way supported
or endorsed by Yubico (although whoever runs their Twitter account
<a href="https://twitter.com/Yubico/status/971186516796915712">thinks it’s awesome</a>).</p>
<p><em>NOTE: Looking for a YubiKey library instead of YubiHSM? Check out
<a href="https://github.com/iqlusioninc/yubikey-piv.rs">yubikey-piv.rs</a> instead.</em></p>
<h3 id="minimum-supported-rust-version"><a class="doc-anchor" href="#minimum-supported-rust-version">§</a>Minimum Supported Rust Version</h3>
<p>This crate requires Rust <strong>1.57</strong> or newer.</p>
<h3 id="supported-commands"><a class="doc-anchor" href="#supported-commands">§</a>Supported Commands</h3>
<p><strong>NOTE:</strong> If there’s a command on this list you’d like to use which isn’t presently
supported, please open an issue requesting support.</p>
<div><table><thead><tr><th><a href="https://developers.yubico.com/YubiHSM2/Commands/">Command</a></th><th>Impl’d</th><th><a href="https://docs.rs/yubihsm/latest/yubihsm/mockhsm/struct.MockHsm.html">MockHSM</a></th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Authenticate_Session.html">Authenticate Session</a></td><td>✅</td><td>✅</td><td>Authenticate to HSM with password or encryption key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.blink_device">Blink Device</a></td><td>✅</td><td>✅</td><td>Blink the HSM’s LEDs (to identify it)</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Change_Authentication_Key.html">Change Authentication Key</a></td><td>⛔</td><td>⛔</td><td>Replace the authentication key used to create current session</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Close_Session.html">Close Session</a></td><td>✅</td><td>✅</td><td>Terminate an encrypted session with the HSM</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Create_Otp_Aead.html">Create OTP AEAD</a></td><td>⛔</td><td>⛔</td><td>Create a Yubico OTP AEAD</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Create_Session.html">Create Session</a></td><td>✅</td><td>✅</td><td>Initiate a new encrypted session with the HSM</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Decrypt_Oaep.html">Decrypt OAEP</a></td><td>✅</td><td>⛔</td><td>Decrypt data encrypted with RSA-OAEP</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Decrypt_Otp.html">Decrypt OTP</a></td><td>⛔</td><td>⛔</td><td>Decrypt a Yubico OTP, obtaining counters and timer info</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Decrypt_Pkcs1.html">Decrypt PKCS1</a></td><td>⛔</td><td>⛔</td><td>Decrypt data encrypted with RSA-PKCS#1v1.5</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.delete_object">Delete Object</a></td><td>✅</td><td>✅</td><td>Delete an object of the given ID and type</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.derive_ecdh">Derive ECDH</a></td><td>⚠️</td><td>⛔</td><td>Compute Elliptic Curve Diffie-Hellman using HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.device_info">Device Info</a></td><td>✅</td><td>✅</td><td>Get information about the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.echo">Echo</a></td><td>✅</td><td>✅</td><td>Echo a message sent to the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.export_wrapped">Export Wrapped</a></td><td>✅</td><td>✅</td><td>Export an object from the HSM in encrypted form</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.generate_asymmetric_key">Generate Asymmetric Key</a></td><td>✅</td><td>✅</td><td>Randomly generate new asymmetric key in the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.generate_hmac_key">Generate HMAC Key</a></td><td>✅</td><td>✅</td><td>Randomly generate HMAC key in the HSM</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Generate_Otp_Aead_Key.html">Generate OTP AEAD Key</a></td><td>⛔</td><td>⛔</td><td>Randomly generate AES key for Yubico OTP authentication</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.generate_wrap_key">Generate Wrap Key</a></td><td>✅</td><td>✅</td><td>Randomly generate AES key for exporting/importing objects</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_log_entries">Get Log Entries</a></td><td>✅</td><td>✅</td><td>Obtain the audit log for the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_object_info">Get Object Info</a></td><td>✅</td><td>✅</td><td>Get information about an object</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_opaque">Get Opaque</a></td><td>✅</td><td>✅</td><td>Get an opaque bytestring from the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_command_audit_option">Get Option</a></td><td>✅</td><td>✅</td><td>Get HSM auditing settings</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_pseudo_random">Get Pseudo Random</a></td><td>✅</td><td>✅</td><td>Get random data generated by the HSM’s internal PRNG</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_pubkey">Get Public key</a></td><td>✅</td><td>✅</td><td>Get public key for an HSM-backed asymmetric private key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.storage_info">Get Storage Info</a></td><td>✅</td><td>✅</td><td>Fetch information about currently free storage</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.get_template">Get SSH Template</a></td><td>✅</td><td>⛔</td><td>Fetch SSH certificate template object from the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.import_wrapped">Import Wrapped</a></td><td>✅</td><td>✅</td><td>Import an encrypted key into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.list_objects">List Objects</a></td><td>✅</td><td>✅</td><td>List objects visible from the current session</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_asymmetric_key">Put Asymmetric Key</a></td><td>✅</td><td>✅</td><td>Put an existing asymmetric key into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_auth_key">Put Authentication Key</a></td><td>✅</td><td>✅</td><td>Put YubiHSM authentication key into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_hmac_key">Put HMAC Key</a></td><td>✅</td><td>✅</td><td>Put an HMAC key into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_opaque">Put Opaque</a></td><td>✅</td><td>✅</td><td>Put an opaque bytestring into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_otp_aead_key">Put OTP AEAD Key</a></td><td>✅</td><td>⛔</td><td>Put a Yubico OTP key into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_template">Put SSH Template</a></td><td>✅</td><td>⛔</td><td>Put SSH certificate template object into the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.put_wrap_key">Put Wrap Key</a></td><td>✅</td><td>✅</td><td>Put an AES keywrapping key into the HSM</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Randomize_Otp_Aead.html">Randomize OTP AEAD</a></td><td>⛔</td><td>⛔</td><td>Randomly generate a Yubico OTP AEAD</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.reset_device">Reset Device</a></td><td>✅</td><td>✅</td><td>Reset the HSM back to factory default settings</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Rewrap_Otp_Aead.html">Rewrap OTP AEAD</a></td><td>⛔</td><td>⛔</td><td>Re-wrap a Yubico OTP AEAD from one key to another</td></tr>
<tr><td><a href="https://developers.yubico.com/YubiHSM2/Commands/Session_Message.html">Session Message</a></td><td>✅</td><td>✅</td><td>Send an encrypted message to the HSM</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.set_log_index">Set Log Index</a></td><td>✅</td><td>✅</td><td>Mark log messages in the HSM as consumed</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.set_audit_option">Set Option</a></td><td>✅</td><td>✅</td><td>Change HSM auditing settings</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_attestation_certificate">Sign Attestation Certificate</a></td><td>✅</td><td>⛔</td><td>Create X.509 certificate for asymmetric key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_ecdsa">Sign ECDSA</a></td><td>✅</td><td>✅</td><td>Compute an ECDSA signature using HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_ed25519">Sign EdDSA</a></td><td>✅</td><td>✅</td><td>Compute an Ed25519 signature using HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_hmac">Sign HMAC</a></td><td>✅</td><td>✅</td><td>Perform an HMAC operation using an HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_rsa_pkcs1v15_sha256">Sign PKCS1</a></td><td>⚠️</td><td>⛔</td><td>Compute an RSASSA-PKCS#1v1.5 signature using HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_rsa_pss_sha256">Sign PSS</a></td><td>⚠️</td><td>⛔</td><td>Compute an RSASSA-PSS signature using HSM-backed key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.sign_ssh_certificate">Sign SSH Certificate</a></td><td>⚠️</td><td>⛔</td><td>Sign an SSH certificate request</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.unwrap_data">Unwrap Data</a></td><td>✅</td><td>⛔</td><td>Decrypt data encrypted using a wrap key</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.verify_hmac">Verify HMAC</a></td><td>✅</td><td>✅</td><td>Verify that an HMAC tag for given data is valid</td></tr>
<tr><td><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html#method.wrap_data">Wrap Data</a></td><td>✅</td><td>⛔</td><td>Encrypt data using a wrap key</td></tr>
</tbody></table>
</div><div><table><thead><tr><th></th><th>Status</th></tr></thead><tbody>
<tr><td>✅</td><td>Supported</td></tr>
<tr><td>⚠️</td><td>Partial/Untested Support</td></tr>
<tr><td>⛔</td><td>Unsupported</td></tr>
</tbody></table>
</div>
<p>NOTE: Commands marked ⚠️ have not been properly tested and may contain bugs or
not work at all. They are disabled by default: to use them you must enable the
<code>untested</code> cargo feature. If you do get them to work, please open an issue
(or PR) reporting success so we can promote them to ✅.</p>
<h3 id="testing"><a class="doc-anchor" href="#testing">§</a>Testing</h3>
<p>This crate allows you to run the <a href="https://github.com/iqlusioninc/yubihsm.rs/blob/main/tests/integration.rs">integration test</a> suite in three different ways:</p>
<ul>
<li>Live testing against a real YubiHSM2 device:
<ul>
<li>via HTTP</li>
<li>via USB</li>
</ul>
</li>
<li>simulated testing using <a href="https://docs.rs/yubihsm/latest/yubihsm/mockhsm/struct.MockHsm.html">MockHSM</a> which implements some YubiHSM2 functionality</li>
</ul>
<h4 id="cargo-test-test-yubihsm2-live-over-http-via-yubihsm-connector"><a class="doc-anchor" href="#cargo-test-test-yubihsm2-live-over-http-via-yubihsm-connector">§</a><code>cargo test</code>: test YubiHSM2 live over HTTP via <code>yubihsm-connector</code></h4>
<p>This mode assumes you have a YubiHSM2 hardware device, have downloaded the
<a href="https://developers.yubico.com/YubiHSM2/Releases/">YubiHSM2 SDK</a> for your platform, and are running a <strong>yubihsm-connector</strong>
process listening on localhost on the default port of 12345.</p>
<p>The YubiHSM2 device should be in the default factory state. To reset it to this
state, either use the <a href="https://developers.yubico.com/YubiHSM2/Commands/Reset_Device.html">yubihsm-shell reset</a> command or press on the YubiHSM2 for
10 seconds immediately after inserting it.</p>
<p>You can confirm the tests are running live against the YubiHSM2 by the LED
blinking rapidly for 1 second.</p>
<p><strong>NOTE THAT THESE TESTS ARE DESTRUCTIVE: DO NOT RUN THEM AGAINST A YUBIHSM2
WHICH CONTAINS KEYS YOU CARE ABOUT</strong></p>
<h4 id="cargo-test---featuresusb-test-yubihsm2-live-via-usb"><a class="doc-anchor" href="#cargo-test---featuresusb-test-yubihsm2-live-via-usb">§</a><code>cargo test --features=usb</code>: test YubiHSM2 live via USB</h4>
<p>Adding the <code>usb</code> cargo feature builds in USB connector support in addition to
HTTP connector, and also runs the test suite live via USB rather than using
the <code>yubihsm-connector</code> process.</p>
<p><strong>ALSO NOTE THAT THESE TESTS ARE DESTRUCTIVE: DO NOT RUN THEM AGAINST A
YUBIHSM2 WHICH CONTAINS KEYS YOU CARE ABOUT</strong></p>
<h4 id="cargo-test---featuresmockhsm-simulated-tests-against-a-mock-hsm"><a class="doc-anchor" href="#cargo-test---featuresmockhsm-simulated-tests-against-a-mock-hsm">§</a><code>cargo test --features=mockhsm</code>: simulated tests against a mock HSM</h4>
<p>This mode is useful for when you don’t have access to physical YubiHSM2
hardware, such as CI environments.</p>
<h3 id="license"><a class="doc-anchor" href="#license">§</a>License</h3>
<p><strong>yubihsm.rs</strong> is distributed under the terms of both the MIT license and
the Apache License (Version 2.0).</p>
<p>See <a href="LICENSE-APACHE">LICENSE-APACHE</a> and <a href="LICENSE-MIT">LICENSE-MIT</a> for details.</p>
<h2 id="getting-started"><a class="doc-anchor" href="#getting-started">§</a>Getting Started</h2>
<p>Most crate functionality can be found in the <code>Client</code> type:</p>
<ul>
<li><a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html">yubihsm::Client: main API for all YubiHSM functionality! Start here!</a></li>
</ul>
<p>In order to connect to the HSM, you’ll need to make a <a href="https://docs.rs/yubihsm/latest/yubihsm/connector/struct.Connector.html">yubihsm::Connector</a>.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<p>The following is an example of how to create a <a href="https://docs.rs/yubihsm/latest/yubihsm/client/struct.Client.html">yubihsm::Client</a> by
connecting via USB, and then performing an Ed25519 signature:</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>yubihsm::{Client, Credentials, UsbConnector};

<span class="comment">// Connect to the first YubiHSM 2 we detect
</span><span class="kw">let </span>connector = UsbConnector::default();

<span class="comment">// Default auth key ID and password for YubiHSM 2
// NOTE: DON'T USE THIS IN PRODUCTION!
</span><span class="kw">let </span>credentials = Credentials::default();

<span class="comment">// Connect to the HSM and authenticate with the given credentials
</span><span class="kw">let </span><span class="kw-2">mut </span>hsm_client = Client::open(connector, credentials, <span class="bool-val">true</span>).unwrap();

<span class="comment">// Note: You'll need to create this key first. Run the following from yubihsm-shell:
// `generate asymmetric 0 100 ed25519_test_key 1 asymmetric_sign_eddsa ed25519`
</span><span class="kw">let </span>signature = hsm_client.sign_ed25519(<span class="number">100</span>, <span class="string">"Hello, world!"</span>).unwrap();
<span class="macro">println!</span>(<span class="string">"Ed25519 signature: {:?}"</span>, signature);</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="algorithm/index.html" title="mod alloy::signers::local::yubihsm::algorithm">algorithm</a></div><div class="desc docblock-short">Cryptographic algorithms supported by the YubiHSM 2</div></li><li><div class="item-name"><a class="mod" href="asymmetric/index.html" title="mod alloy::signers::local::yubihsm::asymmetric">asymmetric</a></div><div class="desc docblock-short">Asymmetric cryptography i.e. digital signatures and public-key encryption.</div></li><li><div class="item-name"><a class="mod" href="attestation/index.html" title="mod alloy::signers::local::yubihsm::attestation">attestation</a></div><div class="desc docblock-short">Attestation Certificates: generate an X.509 certificate which attests that
a key generated with a YubiHSM is genuine</div></li><li><div class="item-name"><a class="mod" href="audit/index.html" title="mod alloy::signers::local::yubihsm::audit">audit</a></div><div class="desc docblock-short">Auditing options (for use with the <code>get_option</code> and <code>put_option</code> command)</div></li><li><div class="item-name"><a class="mod" href="authentication/index.html" title="mod alloy::signers::local::yubihsm::authentication">authentication</a></div><div class="desc docblock-short">YubiHSM 2 authentication functionality (i.e. credentials used to
authenticate and establish a session with an HSM)</div></li><li><div class="item-name"><a class="mod" href="capability/index.html" title="mod alloy::signers::local::yubihsm::capability">capability</a></div><div class="desc docblock-short">Object attributes specifying which operations are allowed to be performed</div></li><li><div class="item-name"><a class="mod" href="client/index.html" title="mod alloy::signers::local::yubihsm::client">client</a></div><div class="desc docblock-short">YubiHSM client: core functionality of this crate.</div></li><li><div class="item-name"><a class="mod" href="command/index.html" title="mod alloy::signers::local::yubihsm::command">command</a></div><div class="desc docblock-short">YubiHSM commands: types and traits for modeling the commands supported
by the HSM device, implemented in relevant modules.</div></li><li><div class="item-name"><a class="mod" href="connector/index.html" title="mod alloy::signers::local::yubihsm::connector">connector</a></div><div class="desc docblock-short">Methods of connecting to a YubiHSM 2:</div></li><li><div class="item-name"><a class="mod" href="device/index.html" title="mod alloy::signers::local::yubihsm::device">device</a></div><div class="desc docblock-short">HSM device-related functionality</div></li><li><div class="item-name"><a class="mod" href="domain/index.html" title="mod alloy::signers::local::yubihsm::domain">domain</a></div><div class="desc docblock-short">Logical partitions within the HSM, allowing several applications to share the device.</div></li><li><div class="item-name"><a class="mod" href="ecdh/index.html" title="mod alloy::signers::local::yubihsm::ecdh">ecdh</a></div><div class="desc docblock-short">Elliptic Curve Diffie Hellman Key Exchange.</div></li><li><div class="item-name"><a class="mod" href="ecdsa/index.html" title="mod alloy::signers::local::yubihsm::ecdsa">ecdsa</a></div><div class="desc docblock-short">Elliptic Curve Digital Signature Algorithm (ECDSA) support</div></li><li><div class="item-name"><a class="mod" href="ed25519/index.html" title="mod alloy::signers::local::yubihsm::ed25519">ed25519</a></div><div class="desc docblock-short">Ed25519 digital signature algorithm support</div></li><li><div class="item-name"><a class="mod" href="error/index.html" title="mod alloy::signers::local::yubihsm::error">error</a></div><div class="desc docblock-short">Error types</div></li><li><div class="item-name"><a class="mod" href="hmac/index.html" title="mod alloy::signers::local::yubihsm::hmac">hmac</a></div><div class="desc docblock-short">Hash-based Message Authentication Code (HMAC)</div></li><li><div class="item-name"><a class="mod" href="object/index.html" title="mod alloy::signers::local::yubihsm::object">object</a></div><div class="desc docblock-short">Objects within the <code>YubiHSM 2</code> (keys, certificates, or other opaque data)</div></li><li><div class="item-name"><a class="mod" href="opaque/index.html" title="mod alloy::signers::local::yubihsm::opaque">opaque</a></div><div class="desc docblock-short">Opaque object support: store arbitrary data in the HSM</div></li><li><div class="item-name"><a class="mod" href="otp/index.html" title="mod alloy::signers::local::yubihsm::otp">otp</a></div><div class="desc docblock-short">Yubico One Time Password (OTP) functionality</div></li><li><div class="item-name"><a class="mod" href="response/index.html" title="mod alloy::signers::local::yubihsm::response">response</a></div><div class="desc docblock-short">Responses to command sent from the HSM.</div></li><li><div class="item-name"><a class="mod" href="rsa/index.html" title="mod alloy::signers::local::yubihsm::rsa">rsa</a></div><div class="desc docblock-short">RSA (Rivest–Shamir–Adleman) asymmetric cryptosystem support
(signing/encryption).</div></li><li><div class="item-name"><a class="mod" href="session/index.html" title="mod alloy::signers::local::yubihsm::session">session</a></div><div class="desc docblock-short">Authenticated/encrypted sessions with the HSM.</div></li><li><div class="item-name"><a class="mod" href="setup/index.html" title="mod alloy::signers::local::yubihsm::setup">setup</a><span class="stab portability" title="Available on crate feature `setup` only"><code>setup</code></span></div><div class="desc docblock-short">Initial YubiHSM 2 setup functionality using declarative device profiles.</div></li><li><div class="item-name"><a class="mod" href="ssh/index.html" title="mod alloy::signers::local::yubihsm::ssh">ssh</a></div><div class="desc docblock-short">Secure Shell Certificate Authority Functionality</div></li><li><div class="item-name"><a class="mod" href="template/index.html" title="mod alloy::signers::local::yubihsm::template">template</a></div><div class="desc docblock-short">Certificate templates.</div></li><li><div class="item-name"><a class="mod" href="wrap/index.html" title="mod alloy::signers::local::yubihsm::wrap">wrap</a></div><div class="desc docblock-short">“Wrapping” support: YubiHSM 2 key/object encryption for backups and
importing existing keys to other derivces.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Capability.html" title="struct alloy::signers::local::yubihsm::Capability">Capability</a></div><div class="desc docblock-short">Object attributes specifying which operations are allowed to be performed</div></li><li><div class="item-name"><a class="struct" href="struct.Client.html" title="struct alloy::signers::local::yubihsm::Client">Client</a></div><div class="desc docblock-short">YubiHSM client: main API in this crate for accessing functions of the
HSM hardware device.</div></li><li><div class="item-name"><a class="struct" href="struct.Connector.html" title="struct alloy::signers::local::yubihsm::Connector">Connector</a></div><div class="desc docblock-short">Abstract interface to multiple types of YubiHSM 2 connections</div></li><li><div class="item-name"><a class="struct" href="struct.Context.html" title="struct alloy::signers::local::yubihsm::Context">Context</a></div><div class="desc docblock-short">Error context: stores an error source (as a <a href="type.BoxError.html" title="type alloy::signers::local::yubihsm::BoxError"><code>BoxError</code></a>) and backtrace
along with an error <code>Kind</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Credentials.html" title="struct alloy::signers::local::yubihsm::Credentials">Credentials</a></div><div class="desc docblock-short">Credentials used to establish a session with the HSM</div></li><li><div class="item-name"><a class="struct" href="struct.Domain.html" title="struct alloy::signers::local::yubihsm::Domain">Domain</a></div><div class="desc docblock-short">Logical partition within the <code>YubiHSM 2</code>, allowing several clients
to access the same device but access controlled on a domain-by-domain
basis. For more information, see the Yubico documentation:</div></li><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct alloy::signers::local::yubihsm::Error">Error</a></div><div class="desc docblock-short">Error type</div></li><li><div class="item-name"><a class="struct" href="struct.HttpConfig.html" title="struct alloy::signers::local::yubihsm::HttpConfig">HttpConfig</a></div><div class="desc docblock-short">Configuration options for the HTTP (i.e. <code>yubihsm-connector</code>) connection</div></li><li><div class="item-name"><a class="struct" href="struct.Message.html" title="struct alloy::signers::local::yubihsm::Message">Message</a></div><div class="desc docblock-short">Error message type: provide additional context with a string.</div></li><li><div class="item-name"><a class="struct" href="struct.UsbConfig.html" title="struct alloy::signers::local::yubihsm::UsbConfig">UsbConfig</a></div><div class="desc docblock-short">Configuration for connecting to the YubiHSM via USB</div></li><li><div class="item-name"><a class="struct" href="struct.Uuid.html" title="struct alloy::signers::local::yubihsm::Uuid">Uuid</a></div><div class="desc docblock-short">A Universally Unique Identifier (UUID).</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Algorithm.html" title="enum alloy::signers::local::yubihsm::Algorithm">Algorithm</a></div><div class="desc docblock-short">Cryptographic algorithm types supported by the <code>YubiHSM 2</code></div></li><li><div class="item-name"><a class="enum" href="enum.AuditOption.html" title="enum alloy::signers::local::yubihsm::AuditOption">AuditOption</a></div><div class="desc docblock-short">Auditing policy options</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.BoxError.html" title="type alloy::signers::local::yubihsm::BoxError">BoxError</a></div><div class="desc docblock-short">Box containing a thread-safe + <code>'static</code> error suitable for use as a
as an <code>std::error::Error::source</code>.</div></li></ul></section></div></main></body></html>